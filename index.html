<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<link rel="stylesheet" href="./main.css">
		<link rel="stylesheet" href="./loading.css">
		<script src="//at.alicdn.com/t/font_1065940_5jkctb2zgot.js"></script>
		<style type="text/css">
			.icon {
			   width: 1em; height: 1em;
			   vertical-align: -0.15em;
			   fill: currentColor;
			   overflow: hidden;
			}
			.sitewelcome{
				display: none;
				position: fixed;
				top: 0;
				left: 0;
				bottom: 0;
				right: 0;
				widows: 100%;
				height:100%;
				background: grey;
				z-index: 1;
				justify-content: center;
				align-items: center; 
			}
			.sitewelcome.active{
				display: flex;
			}
		</style>
	</head>
	<body>
		<div id="sitewelcome" class="sitewelcome active">
			<div class="loading"></div>
		</div>
		
		<div id="topNavBar" class="topNavBar clearfix">
			<div class="topNavBar-inner">
					<a href="#" class="logo" style="float:left;">
						<span class="rs">RS</span><span class="card">card</span>
					</a>
					<nav  class="menu" style="float:right;">
						<ul class="clearfix">
							<li>
								<a href="#siteAbout">关于</a>
							</li>
							<li>
								<a href="#siteSkills">技能</a>
							</li>
							<li>
								<a  href="#siteWorks">作品</a>
								<ul class="submenu">
									<li>作品1</li>
									<li>作品2</li>
									<li>作品3</li>
								</ul>
							</li>
							<li>
								<a  href="#siteBlogs">博客</a>
								<ul class="submenu">
									<li>博客1</li>
									<li>博客2</li>
									<li>博客3</li>
								</ul>
							</li>
							<li>
								<a href="#siteCalendars">日历</a>
							</li>
							<li>
								<a href="#siteTels">联系方式</a>
							</li>
							<li>
								<a href="#siteOther">其他</a>
							</li>
						</ul>
					</nav>
			</div>
			
		</div>
		<div class="banner">
			<div class="mask">

			</div>
		</div>
		<main data-x id="siteAbout">
			<div  class="usercard" >
				<div class="pictureAndtext clearfix">
					<div class="picture">
							<img src="./img/person.jpg" alt="头像" width=294 height=317>
					</div>
					<div class="text">
							<span class="welcome">Hello
								<span class="triangle"></span>
							</span>
							<h1>林启维</h1>
							<p>前端开发工程师</p>
							<hr />
							<dl class="clearfix">
								<dt>年龄</dt>
								<dd>18</dd>
								<dt>地址</dt>
								<dd>南京市栖霞区</dd>
								<dt>电子邮件</dt>
								<dd>1027438108@qq.com</dd>
								<dt>手机号码</dt>
								<dd>18761898840</dd>
							</dl>
					</div>
				</div>
				<footer class="media">
						<a href="#">
								<svg class="icon" aria-hidden="true">
										<use xlink:href="#icon-github"></use>
								</svg>
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-jianshu"></use>
							</svg> 
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
									<use xlink:href="#icon-qq"></use>
							</svg>
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-google"></use>
							</svg>
						</a>
						<a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-5"></use>
							</svg>
						</a>
						<!-- <a href="#">
							<svg class="icon" aria-hidden="true">
								<use xlink:href="#icon-gituhb"></use>
							</svg>
						</a> -->
				</footer>
			</div>
			<p class="button-wrapper">
					<a href="./resume.pdf" class="button" target="_blank" download>
						下载pdf简历
					</a>
			</p>
			<p class="introduction">
				我是林启维,想成为一名前端开发工程师
			</p>
		</main>
		<section data-x id="siteSkills" class="skills">
			<h2>专业技能</h2>
			<ol class="clearfix">
				<li>
					<h3>HTML &amp; CSS3</h3>
					<div class="progressBar">
						<div class="progress"></div>
					</div>
				</li>
				<li>
						<h3>JavaScript</h3>
						<div class="progressBar">
							<div class="progress"></div>
						</div>
				</li>
				<li>
					<h3>JQuery</h3>
					<div class="progressBar">
						<div class="progress"></div>
					</div>
				</li>
				<li>
					<h3>Vue</h3>
					<div class="progressBar">
						<div class="progress"></div>
					</div>
				</li>
				<li>
					<h3>react</h3>
					<div class="progressBar">
						<div class="progress"></div>
					</div>
				</li>
				<li>
					<h3>HTTP</h3>
					<div class="progressBar">
						<div class="progress"></div>
					</div>
				</li>
			</ol>
		</section>
		<section data-x id="siteWorks" class="portfolio">
			<h2>作品集合</h2>
			<nav>
				<ol class="clearfix">
					<li id="portfolioAll">所有</li>
					<li id="portfolioFrame">框架</li>
					<li id="portfolioJC">原生JS&amp;CSS</li>
				</ol>
				<div id="portfolioBar" class="bar state-1">
					<div class="barInner"></div>
				</div>
			</nav>
			<script>
				portfolioAll.onclick= function(){
					portfolioBar.className='bar state-1'
				}
				portfolioFrame.onclick= function(){
					portfolioBar.className='bar state-2'
				}
				portfolioJC.onclick= function(){
					portfolioBar.className='bar state-3'
				}
			</script>

			
			<div class="works">
				<div class="big">
					<img src="./img/big.jpg" alt="作品1"/>
				</div>
				<div class="small smalltop">
					<img src="./img/smalltop.jpg" alt="作品2"/>
				</div>
				<div class="small smallbottom">
					<img src="./img/smallbottom.jpg" alt="作品3"/>
				</div>
			</div>
		</section>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.3.0/Tween.min.js"></script>
		<script>
						// Setup the animation loop.
			function animate(time) {
				requestAnimationFrame(animate);
				TWEEN.update(time);
			}
			requestAnimationFrame(animate);
			
			setTimeout(function(){
				sitewelcome.classList.remove('active')
			},1000);

			let specialTags = document.querySelectorAll('[data-x]');
			for(let i=0;i<specialTags.length;i++)
			{
				specialTags[i].classList.add('offset');
			}
			setTimeout(function(){
				findClosest();
			  }
			,1000);
			window.onscroll=function(){
				if(window.scrollY>0)
				{
					topNavBar.classList.add('sticky');
				}else{
					topNavBar.classList.remove('sticky');
				}
				findClosest();

			}
			function findClosest(){
				// console.log(window.scrollY);
				let specialTags = document.querySelectorAll('[data-x]');
				let minIndex=0;
				for(let i=0;i<specialTags.length;i++)
				{
					if(Math.abs(specialTags[i].offsetTop-window.scrollY)<Math.abs(specialTags[minIndex].offsetTop-window.scrollY)){
						minIndex=i;
					}
				}
				specialTags[minIndex].classList.remove('offset');
				let id=specialTags[minIndex].id;
				// console.log(id);
				let a=document.querySelector('a[href="#'+id +'"]');
				let li=a.parentNode;
				let brothersAndMe = li.parentNode.children;
				for(let i=0;i<brothersAndMe.length;i++)
				{
					brothersAndMe[i].classList.remove('highlight');
				}
				li.classList.add('highlight');
			}
			let liTags=document.querySelectorAll('nav.menu>ul>li');
			for(let i=0;i<liTags.length;i++){
				liTags[i].onmouseenter=function(x){
					x.currentTarget.classList.add('active');
				}
				liTags[i].onmouseleave=function(x){
					x.currentTarget.classList.remove('active');
				}
			}

			let aTags=document.querySelectorAll('nav.menu>ul>li>a');
			for(let i=0;i<aTags.length;i++){
				aTags[i].onclick=function(x){
					x.preventDefault();
					// let a=x.currentTarget;
					// let href=a.getAttribute('href');
					// let element=document.querySelector(href);
					// // let rect=document.getBoundingClientRect();
					// let top=element.offsetTop;
					let top=document.querySelector(x.currentTarget.getAttribute('href')).offsetTop;
					

					// let n=25;
					// let duration = 500/n;
					let currentTop=window.scrollY;
					let targetTop=top-80;
					let s=targetTop-currentTop;
					var t=Math.abs((s/100))*300;
					// let distance=(targetTop-currentTop)/n;
					// let i=0;
					// let id=setInterval(()=>{
					// 	if(i===n){
					// 		window.clearInterval(id);
					// 		return;
					// 	}
					// 	i=i+1;
					// 	window.scrollTo(0,currentTop+distance*i);
						
					// },duration)
					if(t>500){
						t=500;
					}
					var coords = {  y: currentTop }; // Start at (0, 0)
					var tween = new TWEEN.Tween(coords) // Create a new tween that modifies 'coords'.
							.to({  y: targetTop }, t) // Move to (300, 200) in 1 second.
							.easing(TWEEN.Easing.Quadratic.InOut) // Use an easing function to make the animation smooth.
							.onUpdate(function() { // Called after tween.js updates 'coords'.
								// Move 'box' to the position described by 'coords' with a CSS translation.
								window.scrollTo(0,coords.y);
							})
							.start(); // Start the tween immediately.

					// window.scrollTo(0,top-80);
				}
			}
		</script>
	</body>
</html>
